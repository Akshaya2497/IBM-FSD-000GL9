<html>
    <head>
        <title> Cart </title>
    </head>
     <!-- <script type="text/javascript" src="additem.js"></script>  -->
    
    <script>
    const loadApp = ()=>{
           
       console.log("load");
            const _url = 'http://localhost:4455/products';
            fetch(_url)
            .then(res=>res.json())
            .then(data=>{
                console.log(data);
                searchByCategory(data);
                searchByName(data);
            })       
    }
    const add = () =>{
        const _url = 'http://localhost:4455/add';
            fetch(_url)
            .then(res=>res.json())
            .then(data=>{
                console.log(data);
                searchByCategory(data);
                searchByName(data);
            }) 

    }
    const searchByCategory=(data)=>{
        let rows='<select>';
        
        data.forEach((prod)=>{
            console.log("product");
            rows+=`<option>${prod[0].category}</option>`;
        });
        rows+=`</select>`;
        document.getElementById('searchByCat').innerHTML=rows;
    }
    const searchByName=(data)=>{
        let rows='<select>';
        Array.from(data).forEach((prod)=>{
            rows+=`<option>${prod.name}</option>`;
        });
        rows+='</select>';
        document.getElementById('searchByName').innerHTML=rows;
        
    }
    </script>
    <body onload="loadApp()">
         Search by Catgory    
           <select id="sCategory">
               <option>Mobile Case</option>
               <option>Entertainment</option>
               <option>Tupperware </option>
           </select>
       </br>

       Search by Name 
            <select id="sName">
                    <option>Google pixel</option>
                    <option>Fire Stick</option>
                    <option>Bottle</option>
                </select>
       
       <br/>
       
       <br/>
       <div id="searchByCat" >
       </div>
       <div id="searchByName"></div>
       <input type="button" onclick="add()" value="Add Item">
        <div id="table"></div> 

    </body>
</html>